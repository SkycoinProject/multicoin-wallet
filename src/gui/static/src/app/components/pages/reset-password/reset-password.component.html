<app-header [headline]="'reset.title' | translate"></app-header>
<div class="container">

  <!-- Loading animation. -->
  <app-loading-content
    [isLoading]="false"
    noDataText="reset.invalid-wallet"
    *ngIf="invalidWallet"
  ></app-loading-content>

  <div class="paper" *ngIf="!invalidWallet && wallet">
    <div [formGroup]="form">
      <!-- Form fields. -->
      <div class="form-field">
        <!-- Label. -->
        <label for="wallet">{{ 'reset.wallet-label' | translate }}</label>
        <div class="-not-allowed"><input formControlName="wallet" id="wallet" readonly [ngClass]="{'element-disabled' : busy}"></div>
      </div>
      <!-- Manual seed. -->
      <div class="form-field" [ngClass]="{'d-none': enterSeedWithAssistance}">
        <label for="seed">{{ 'reset.seed-label' | translate }}</label>
        <textarea formControlName="seed" id="seed" row="2" [attr.disabled]="busy ? 'true' : null"></textarea>
        <!-- Change seed mode link. -->
        <div appThemeColorText [ngClass]="{'element-disabled' : busy}" class="seed-type-button">
          <span appThemeColorText class="link" (click)="changeSeedType()">
            <mat-icon [inline]="true">format_list_numbered</mat-icon>{{ 'wallet.new.seed.use-normal' | translate }}
          </span>
        </div>
      </div>
      <!-- How many words the seed has (while using the assisted mode only). -->
      <div class="form-field" *ngIf="enterSeedWithAssistance" [ngClass]="{'d-none': !enterSeedWithAssistance}">
        <label for="number_of_words">{{ 'reset.words-number-label' | translate}}</label>
        <div class="-select">
          <select formControlName="number_of_words" id="number_of_words" [attr.disabled]="busy ? 'true' : null">
            <option [ngValue]="12">{{ 'reset.12-words' | translate }}</option>
            <option [ngValue]="24">{{ 'reset.24-words' | translate }}</option>
          </select>
        </div>
      </div>
      <!-- Assisted seed. -->
      <div class="form-field" [ngClass]="{'d-none': !enterSeedWithAssistance}">
        <label for="seed">{{ 'reset.seed-label' | translate }}</label>
        <app-assisted-seed-field
          #assistedSeed
          [showConfirmationOnly]="false"
          [busy]="busy"
          [emptyText]="'reset.enter-seed'"
          [howManyWords]="selectedNumberOfWords"
          [reasonForAsking]="wordAskedReasons.RecoveringSoftwareWalletPassword">
        </app-assisted-seed-field>
        <!-- Change seed mode link. -->
        <div appThemeColorText [ngClass]="{'element-disabled' : busy}" class="seed-type-button">
          <span appThemeColorText class="link" (click)="changeSeedType()">
            <mat-icon [inline]="true">edit</mat-icon> {{ 'wallet.new.seed.use-custom' | translate }}
          </span>
        </div>
      </div>
      <!-- Passphrase. -->
      <div class="form-field" *ngIf="wallet.walletType === walletTypes.Bip44">
        <label for="passphrase">{{ 'reset.passphrase-label' | translate }}</label>
        <input formControlName="passphrase" id="passphrase" [attr.disabled]="busy ? 'true' : null">
      </div>
      <!-- New password. -->
      <div class="form-field">
        <label for="password">{{ 'reset.password-label' | translate }}</label>
        <input formControlName="password" id="password" type="password" appDontSavePassword [attr.disabled]="busy ? 'true' : null">
      </div>
      <!-- Password confirmation. -->
      <div class="form-field">
        <label for="confirm">{{ 'reset.confirm-label' | translate }}</label>
        <input formControlName="confirm" id="confirm" type="password" appDontSavePassword (keydown.enter)="reset()" [attr.disabled]="busy ? 'true' : null">
      </div>
      <!-- Button area. -->
      <div class="text-center">
        <app-button #resetButton (action)="reset()" [useMainGradient]="true" [disabled]="!isValid">
          {{ 'reset.reset-button' | translate }}
        </app-button>
      </div>
    </div>
  </div>
</div>
